---
title: "Introductory Data Munging in R"
author: "Ken Oung Yong Quan"
date: "23 July 2016"
output:
  knitrBootstrap::bootstrap_document:
    title: "R Intro"
    theme: journal
    highlight: sunburst
    theme.chooser: TRUE
    highlight.chooser: FALSE
---
# Introductory Data Munging in R
## Opening Words
TODO: What to expect.

## Importing Data
We'll be using the DMEF dataset, which is mostly online shopping data (some phone and mail transactions too). Let's just import the data first. (BTW, if you're using RStudio, both of these steps can be performed using the GUI. The code will be generated for you.)
```{r}
# Navigating to your working directory (GUI)
setwd("C:/Users/Ken/Dropbox/Academics/2016/Sem2/R Intro/bza-r-intro/code")

# Loading the file (GUI)
dmef_dataset <- read.csv("C:/Users/Ken/Dropbox/Academics/2016/Sem2/R Intro/bza-r-intro/data/dmef_dataset.csv")
```

So the code above loaded the csv data and saved it to the 'dmef_dataset' variable. You can take a look at the entire dataset using the View command, ```View(dmef_dataset)```, or get a simple summary using the summary command, which shows you the range of data for each column, or the counts for categorical data.

The str command shows you what types each of the columns are currently stored in.

```{r}
summary(dmef_dataset)
str(dmef_dataset)
```

## Before we go on...
Personally, I like using the data.table library. You have other options like dplyr which works better with ggplot2, but data.table is the one I'm comfortable with.

```{r}
# If you haven't installed it
# install.packages(data.table)
library(data.table)

# Making the dataframe a datatable
dmef_dataset <- as.data.table(dmef_dataset)
```

## WTF so many columns
We really don't need all these details to do our analysis. Let's just take the stuff that we need.

```{r}
dmef_small <- dmef_dataset[, .(ZIP, ORDER_LINE, PRODUCT_CATEGORY_ID, CHANNEL, RETN_QTY, RETN_REVENUE)]
```

## Getting a sense of the data
Sometimes just looking at the just a few rows of data can help you get a better understanding of what each column means.

There are a few ways to go about doing this:

### Head or Tail
```{r}
# First 6 obs
head(dmef_small)

# Last 6 obs
tail(dmef_small)
```

### Specific rows
```{r}
# 10th to 30th rows
dmef_small[10:30]
```



### K but let's be honest
It doesn't really make sense to select specific column numbers. Let's do something more interesting. I'm actually interested in knowing more about those orders that got returned. 

```{r}
dmef_returned <- dmef_small[RETN_QTY > 0]

# Number of orders returned
nrow(dmef_returned)

# Percentage of orders returned
nrow(dmef_returned)/nrow(dmef_small)
```

